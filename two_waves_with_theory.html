<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Phase and Group Velocity ‚Äì Complete Visualization</title>

<!-- MathJax -->
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<style>
body{
  margin:0;
  background:#0a0f1a;
  color:#00ffee;
  font-family:Consolas, monospace;
  text-align:center;
}

h2{ margin:15px; }

.controls{
  padding:12px;
  background:#111;
  border-top:2px solid #00ffee;
  border-bottom:2px solid #00ffee;
}

label{
  margin:8px 12px;
  display:inline-block;
}

input[type=range]{ width:140px; }

.value{
  display:inline-block;
  min-width:65px;
  padding:3px 6px;
  margin-left:4px;
  border:1px solid #00ffee;
  background:#000;
}

canvas{
  background:#000;
  border:1px solid #222;
  margin:10px;
}

.theory{
  max-width:1000px;
  margin:40px auto;
  padding:20px;
  text-align:left;
  background:#111;
  border:1px solid #00ffee;
}
</style>
</head>

<body>

<h2>Superposition of Two Close Plane Waves</h2>

<div class="controls">

<label>A <input type="range" id="A" min="0.5" max="2" step="0.1" value="1"></label>
<label>k‚ÇÅ <input type="range" id="k1" min="15" max="25" step="0.1" value="20"></label>
<label>k‚ÇÇ <input type="range" id="k2" min="15" max="25" step="0.1" value="21"></label>
<label>œâ‚ÇÅ <input type="range" id="w1" min="80" max="120" step="1" value="100"></label>
<label>œâ‚ÇÇ <input type="range" id="w2" min="80" max="120" step="1" value="105"></label>
<label>Speed <input type="range" id="speed" min="0" max="3" step="0.1" value="1"></label>

</div>

<canvas id="canvas1" width="1000" height="220"></canvas>
<canvas id="canvas2" width="1000" height="360"></canvas>

<!-- Live LaTeX display -->
<div id="liveMath" style="margin-top:20px; font-size:18px;"></div>

<!-- Theoretical Section -->
<div class="theory">

<h3>üìò Theoretical Background</h3>

<p>
We consider the superposition of two harmonic plane waves:
</p>

\[
\psi_1 = A \cos(k_1 x - \omega_1 t)
\]

\[
\psi_2 = A \cos(k_2 x - \omega_2 t)
\]

<p>
Using the trigonometric identity:
</p>

\[
\cos a + \cos b =
2 \cos\left(\frac{a-b}{2}\right)
\cos\left(\frac{a+b}{2}\right)
\]

<p>
The total wave becomes:
</p>

\[
\psi(x,t) =
2A
\cos\left(
\frac{\Delta k}{2} x -
\frac{\Delta \omega}{2} t
\right)
\cos\left(
k_{avg} x -
\omega_{avg} t
\right)
\]

<p>
The fast oscillation (carrier) moves at the <b>phase velocity</b>:
</p>

\[
v_p = \frac{\omega_{avg}}{k_{avg}}
\]

<p>
The envelope propagates at the <b>group velocity</b>:
</p>

\[
v_g = \frac{\Delta \omega}{\Delta k}
\]

<p>
In a dispersive medium:
</p>

\[
v_g = \frac{d\omega}{dk}
\]

</div>

<script>

const c1 = document.getElementById("canvas1");
const c2 = document.getElementById("canvas2");
const ctx1 = c1.getContext("2d");
const ctx2 = c2.getContext("2d");

let time = 0;
const baseDt = 0.0021;

function drawWave(ctx,canvas,func,color,scale=50){
  ctx.strokeStyle=color;
  ctx.lineWidth=2;
  ctx.beginPath();
  for(let px=0; px<canvas.width; px++){
    let x = px/100;
    let y = canvas.height/2 - scale*func(x);
    if(px===0) ctx.moveTo(px,y);
    else ctx.lineTo(px,y);
  }
  ctx.stroke();
}

function drawArrow(ctx,x,y,length,color,label){
  ctx.strokeStyle=color;
  ctx.fillStyle=color;
  ctx.lineWidth=3;

  ctx.beginPath();
  ctx.moveTo(x,y);
  ctx.lineTo(x+length,y);
  ctx.stroke();

  ctx.beginPath();
  if(length>=0){
    ctx.moveTo(x+length,y);
    ctx.lineTo(x+length-10,y-6);
    ctx.lineTo(x+length-10,y+6);
  } else {
    ctx.moveTo(x+length,y);
    ctx.lineTo(x+length+10,y-6);
    ctx.lineTo(x+length+10,y+6);
  }
  ctx.closePath();
  ctx.fill();
  
  if(length >= 0)
    ctx.fillText(label,x+length+8,y+4);
  else
    ctx.fillText(label,x+length-40,y+4);
}

function animate(){

  let speed = parseFloat(speed_slider.value);
  time += baseDt * speed;

  let A  = parseFloat(A_slider.value);
  let k1 = parseFloat(k1_slider.value);
  let k2 = parseFloat(k2_slider.value);
  let w1 = parseFloat(w1_slider.value);
  let w2 = parseFloat(w2_slider.value);

  let kAvg = (k1+k2)/2;
  let wAvg = (w1+w2)/2;

  let dk = k2-k1;
  let dw = w2-w1;

  let vp = wAvg/kAvg;
  let vg = Math.abs(dk)>0.0001 ? dw/dk : 0;

  ctx1.clearRect(0,0,c1.width,c1.height);
  ctx2.clearRect(0,0,c2.width,c2.height);

  drawWave(ctx1,c1,x=>A*Math.cos(k1*x-w1*time),"#39ff14");
  drawWave(ctx1,c1,x=>A*Math.cos(k2*x-w2*time),"#ff00ff");

  drawWave(ctx2,c2,
    x=>A*Math.cos(k1*x-w1*time)+A*Math.cos(k2*x-w2*time),
    "#ffffff",70);

  drawWave(ctx2,c2,
    x=>2*A*Math.cos(0.5*(dk*x-dw*time)),
    "#ff4444",70);

  drawWave(ctx2,c2,
    x=>-2*A*Math.cos(0.5*(dk*x-dw*time)),
    "#ff4444",70);
	
  drawArrow(ctx2,100,40,vp*10,"white","Vp");
  drawArrow(ctx2,100,70,vg*10,"red","Vg");

  ctx2.fillStyle="#00ffee";
  ctx2.fillText("v_p = "+vp.toFixed(3),850,40);
  ctx2.fillText("v_g = "+vg.toFixed(3),850,65);

  requestAnimationFrame(animate);
}

const A_slider=document.getElementById("A");
const k1_slider=document.getElementById("k1");
const k2_slider=document.getElementById("k2");
const w1_slider=document.getElementById("w1");
const w2_slider=document.getElementById("w2");
const speed_slider=document.getElementById("speed");

animate();

</script>
</body>
</html>
