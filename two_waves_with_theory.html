<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Wave Packet – Phase & Group Velocity</title>

<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<style>
body{
  background:#000;
  color:#00ffee;
  font-family:Consolas;
  text-align:center;
}

canvas{
  background:#111;
  display:block;
  margin:10px auto;
  border:1px solid #00ffee;
}

table{
  margin:auto;
  border-spacing:15px 8px;
}

.value{
  min-width:50px;
  display:inline-block;
  text-align:right;
}
</style>
</head>
<body>

<h2>Wave Superposition – Phase and Group Velocity</h2>

<!-- ================= CONTROLS ================= -->

<div class="controls">

<table>
<tr><td>A</td>
<td><input type="range" id="A" min="0.5" max="2" step="0.1" value="1"></td>
<td><span class="value" id="AVal"></span></td><td></td></tr>

<tr><td>k₁</td>
<td><input type="range" id="k1" min="15" max="25" step="0.1" value="20"></td>
<td><span class="value" id="k1Val"></span></td><td>rad/m</td></tr>

<tr><td>k₂</td>
<td><input type="range" id="k2" min="15" max="25" step="0.1" value="21"></td>
<td><span class="value" id="k2Val"></span></td><td>rad/m</td></tr>

<tr><td>ω₁</td>
<td><input type="range" id="w1" min="80" max="120" step="1" value="100"></td>
<td><span class="value" id="w1Val"></span></td><td>rad/s</td></tr>

<tr><td>ω₂</td>
<td><input type="range" id="w2" min="80" max="120" step="1" value="105"></td>
<td><span class="value" id="w2Val"></span></td><td>rad/s</td></tr>

<tr><td>Speed</td>
<td><input type="range" id="speed" min="0" max="3" step="0.1" value="1"></td>
<td><span class="value" id="speedVal"></span></td><td>×</td></tr>
</table>

<br>

<label>
<input type="checkbox" id="gridToggle" checked>
 Show Grid
</label>

<br><br>

<button onclick="resetSliders()">Reset</button>

</div>

<!-- ================= CANVASES ================= -->

<h3>Original Waves</h3>
<canvas id="canvas1" width="1000" height="220"></canvas>

<h3>Superposition and Envelope</h3>
<canvas id="canvas2" width="1000" height="360"></canvas>

<script>

// ================== CONTEXT ==================

const canvas1 = document.getElementById("canvas1");
const ctx1 = canvas1.getContext("2d");

const canvas2 = document.getElementById("canvas2");
const ctx2 = canvas2.getContext("2d");

// ================== SCALE ==================

const originX = 60;
const scaleX = 50;
const scaleY = 60;

const baseDt = 0.002;
// ================== DRAW GRID + AXES ==================

function drawAxes(ctx, canvas){

  const showGrid = document.getElementById("gridToggle").checked;

  if(showGrid){
    ctx.strokeStyle = "#222";
    ctx.lineWidth = 1;

    // vertical grid
    for(let x=originX; x<canvas.width; x+=scaleX){
      ctx.beginPath();
      ctx.moveTo(x,0);
      ctx.lineTo(x,canvas.height);
      ctx.stroke();
    }

    // horizontal grid
    for(let y=0; y<canvas.height; y+=40){
      ctx.beginPath();
      ctx.moveTo(0,y);
      ctx.lineTo(canvas.width,y);
      ctx.stroke();
    }
  }

  // Axes
  ctx.strokeStyle = "#00ffee";
  ctx.lineWidth = 2;

  // x-axis
  ctx.beginPath();
  ctx.moveTo(0,canvas.height/2);
  ctx.lineTo(canvas.width,canvas.height/2);
  ctx.stroke();

  // y-axis
  ctx.beginPath();
  ctx.moveTo(originX,0);
  ctx.lineTo(originX,canvas.height);
  ctx.stroke();

  // Axis labels
  ctx.fillStyle = "#00ffee";
  ctx.font = "14px Consolas";

  ctx.fillText("x", canvas.width-20, canvas.height/2 - 8);
  ctx.fillText("ψ(x,t)", 5, 20);

  // Numeric x-ticks
  for(let x=originX; x<canvas.width; x+=scaleX){
    let value = ((x-originX)/scaleX).toFixed(0);
    ctx.fillText(value, x-5, canvas.height/2 + 18);
  }
}

// ================== DRAW FUNCTION ==================

function drawWave(ctx, canvas, func, color){

  ctx.clearRect(0,0,canvas.width,canvas.height);

  drawAxes(ctx,canvas);

  ctx.beginPath();
  ctx.strokeStyle = color;
  ctx.lineWidth = 2;

  for(let px=0; px<canvas.width; px++){

    let x = (px-originX)/scaleX;
    let y = func(x);

    let py = canvas.height/2 - y*scaleY;

    if(px===0) ctx.moveTo(px,py);
    else ctx.lineTo(px,py);
  }

  ctx.stroke();
}

// ================== RESET ==================

function resetSliders(){
  A.value=1;
  k1.value=20;
  k2.value=21;
  w1.value=100;
  w2.value=105;
  speed.value=1;
}

// ================== ANIMATION ==================

let t = 0;

function animate(){

  const A = parseFloat(document.getElementById("A").value);
  const k1 = parseFloat(document.getElementById("k1").value);
  const k2 = parseFloat(document.getElementById("k2").value);
  const w1 = parseFloat(document.getElementById("w1").value);
  const w2 = parseFloat(document.getElementById("w2").value);
  const speed = parseFloat(document.getElementById("speed").value);

  // Update values
  AVal.textContent = A.toFixed(1);
  k1Val.textContent = k1.toFixed(1);
  k2Val.textContent = k2.toFixed(1);
  w1Val.textContent = w1.toFixed(0);
  w2Val.textContent = w2.toFixed(0);
  speedVal.textContent = speed.toFixed(1);

  let dk = k2-k1;
  let dw = w2-w1;

  let vp = wAvg/kAvg;
  let vg = Math.abs(dk)>0.0001 ? dw/dk : 0;

  t += 0.002 * speed;

  // Individual waves
  drawWave(ctx1,canvas1,
    x => A*Math.cos(k1*x - w1*t),
    "#39ff14"
  );

  drawWave(ctx1,canvas1,
    x => A*Math.cos(k2*x - w2*t),
    "#ff00ff"
  );

  // Superposition
  drawWave(ctx2,canvas2,
    x => A*Math.cos(k1*x - w1*t) +
         A*Math.cos(k2*x - w2*t),
    "white"
  );

  // Enveloppe
  drawWave(ctx2,canvas2,
    x=>2*A*Math.cos(0.5*(dk*x-dw*t)),
    "#ff4444",70);

  drawWave(ctx2,canvas2,
    x=>-2*A*Math.cos(0.5*(dk*x-dw*t)),
    "#ff4444",70);

  requestAnimationFrame(animate);
}

animate();

</script>
</body>
</html>






