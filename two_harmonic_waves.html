<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Wave Packet ‚Äì Phase & Group Velocity</title>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js">
</script>

    <style>
        body {
            background: #000;
            color: #d3f3f1;
            font-family: Consolas;
            text-align: center;
        }

        canvas {
            background: #111;
            display: block;
            margin: 10px auto;
            border: 1px solid #00ffee;
        }

        table {
            margin: auto;
            border-spacing: 15px 8px;
        }

        .value {
            min-width: 50px;
            display: inline-block;
            text-align: right;
        }
    </style>
</head>

<body>

    <h2>Wave Packet ‚Äì Phase & Group Velocity</h2>

    <table>
        <tr>
            <td>A</td>
            <td><input type="range" id="A" min="0.5" max="2" step="0.1" value="1"></td>
            <td><span class="value" id="AVal"></span></td>
        </tr>

        <tr>
            <td>k‚ÇÅ</td>
            <td><input type="range" id="k1" min="5" max="25" step="0.1" value="15"></td>
            <td><span class="value" id="k1Val"></span></td>
        </tr>

        <tr>
            <td>k‚ÇÇ</td>
            <td><input type="range" id="k2" min="5" max="15" step="0.1" value="21"></td>
            <td><span class="value" id="k2Val"></span></td>
        </tr>

        <tr>
            <td>œâ‚ÇÅ</td>
            <td><input type="range" id="w1" min="80" max="120" step="1" value="100"></td>
            <td><span class="value" id="w1Val"></span></td>
        </tr>

        <tr>
            <td>œâ‚ÇÇ</td>
            <td><input type="range" id="w2" min="80" max="120" step="1" value="105"></td>
            <td><span class="value" id="w2Val"></span></td>
        </tr>

        <tr>
            <td>Speed</td>
            <td><input type="range" id="speed" min="0" max="3" step="0.1" value="1"></td>
            <td><span class="value" id="speedVal"></span></td>
        </tr>
    </table>

    <br>

    <label>
        <input type="checkbox" id="gridToggle" checked>
        Show Grid
    </label>

    <br><br>

    <button onclick="resetSliders()">Reset</button>

    <h3>Original Waves</h3>
    <h4><p>\({\color{#39ff14}\phi_1(x,t)}, {\color{#ff00ff} \phi_2(x,t)}\) </p></h4>
    <canvas id="canvas1" width="1000" height="220"></canvas>

    <h3>Superposition and Envelope</h3>
    <h4><p>\({\color{white}\phi(x,t)}, {\color{red} \phi_{env}(x,t)}\) </p></h4>
    <canvas id="canvas2" width="1000" height="260"></canvas>

    <!-- Live LaTeX display -->
    <div id="liveMath" style="margin-top:20px; font-size:18px;"></div>
    
    <!-- Theoretical Section -->
    <div class="theory">
    
        <h3>üìò Theoretical Background</h3>
    
        <p>
            We consider the superposition of two harmonic plane waves:
        </p>
    
        \[
        \phi_1(x,t) = A \cos(k_1 x - \omega_1 t)
        \]
    
        \[
        \phi_2(x,t) = A \cos(k_2 x - \omega_2 t)
        \]
       
        <p>
            The total wave becomes:
        </p>
    
        \[
        \phi(x,t) = \phi_1 + \phi_2 =
        2A
        \cos\left(
        \frac{\Delta k}{2} x -
        \frac{\Delta \omega}{2} t
        \right)
        \cos\left(
        k_{avg} x -
        \omega_{avg} t
        \right)
        \]
        where : \(\Delta k = k_2 - k_1\), \(\Delta \omega = \omega_2 - \omega_1\),
                \(k_{avg} = \frac{k_1 + k_2}{2}\),  \(\omega_{avg} = \frac{\omega_1 + \omega_2}{2}\)
         
        <p>
            The fast oscillation (carrier) moves at the <b>phase velocity</b>:
        </p>
    
        \[
        v_p = \frac{\omega_{avg}}{k_{avg}}
        \]
    
        <p>
            The envelope propagates at the <b>group velocity</b>:
        </p>
    
        \[
        v_g = \frac{\Delta \omega}{\Delta k}
        \]
    
        <p>
            In a dispersive medium:
        </p>
    
        \[
        v_g = \frac{d\omega}{dk}
        \]
    
    </div>

    <script>

        // ===== GET ELEMENTS =====

        const A_slider = document.getElementById("A");
        const k1_slider = document.getElementById("k1");
        const k2_slider = document.getElementById("k2");
        const w1_slider = document.getElementById("w1");
        const w2_slider = document.getElementById("w2");
        const speed_slider = document.getElementById("speed");

        const AVal = document.getElementById("AVal");
        const k1Val = document.getElementById("k1Val");
        const k2Val = document.getElementById("k2Val");
        const w1Val = document.getElementById("w1Val");
        const w2Val = document.getElementById("w2Val");
        const speedVal = document.getElementById("speedVal");

        const canvas1 = document.getElementById("canvas1");
        const ctx1 = canvas1.getContext("2d");

        const canvas2 = document.getElementById("canvas2");
        const ctx2 = canvas2.getContext("2d");

        // ===== SCALE SETTINGS =====

        const originX = 60;
        const scaleX = 50;
        const scaleY = 60;

        // ===== DRAW AXES =====

        function drawAxes(ctx, canvas) {

            const showGrid = document.getElementById("gridToggle").checked;

            if (showGrid) {
                ctx.strokeStyle = "#222";
                ctx.lineWidth = 1;

                for (let x = originX; x < canvas.width; x += scaleX) {
                    ctx.beginPath();
                    ctx.moveTo(x, 0);
                    ctx.lineTo(x, canvas.height);
                    ctx.stroke();
                }

                for (let y = 0; y < canvas.height; y += 40) {
                    ctx.beginPath();
                    ctx.moveTo(0, y);
                    ctx.lineTo(canvas.width, y);
                    ctx.stroke();
                }
            }

            // Axes
            ctx.strokeStyle = "#00ffee";
            ctx.lineWidth = 2;

            ctx.beginPath();
            ctx.moveTo(0, canvas.height / 2);
            ctx.lineTo(canvas.width, canvas.height / 2);
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(originX, 0);
            ctx.lineTo(originX, canvas.height);
            ctx.stroke();

            // Labels
            ctx.fillStyle = "#00ffee";
            ctx.font = "14px Consolas";

            ctx.fillText("x", canvas.width - 20, canvas.height / 2 - 8);
            // ctx.fillText(legendtext, 5, 20);

            // Numeric ticks
            for (let x = originX; x < canvas.width; x += scaleX) {
                let value = ((x - originX) / scaleX).toFixed(0);
                ctx.fillText(value, x - 5, canvas.height / 2 + 18);
            }
        }

        // ===== DRAW CURVE =====

        function drawCurve(ctx, canvas, func, color, dashed = false) {

            ctx.beginPath();
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;

            if (dashed) ctx.setLineDash([6, 6]);
            else ctx.setLineDash([]);

            for (let px = 0; px < canvas.width; px++) {

                let x = (px - originX) / scaleX;
                let y = func(x);

                let py = canvas.height / 2 - y * scaleY;

                if (px === 0) ctx.moveTo(px, py);
                else ctx.lineTo(px, py);
            }

            ctx.stroke();
            ctx.setLineDash([]);
        }

        // ===== RESET =====

        function resetSliders() {
            A_slider.value = 1;
            k1_slider.value = 10;
            k2_slider.value = 11;
            w1_slider.value = 100;
            w2_slider.value = 95;
            speed_slider.value = 1;
        }

        // ===== ANIMATION =====

        let t = 0;

        function animate() {

            const A = parseFloat(A_slider.value);
            const k1 = parseFloat(k1_slider.value);
            const k2 = parseFloat(k2_slider.value);
            const w1 = parseFloat(w1_slider.value);
            const w2 = parseFloat(w2_slider.value);
            const speed = parseFloat(speed_slider.value);

            AVal.textContent = A.toFixed(1);
            k1Val.textContent = k1.toFixed(1);
            k2Val.textContent = k2.toFixed(1);
            w1Val.textContent = w1.toFixed(0);
            w2Val.textContent = w2.toFixed(0);
            speedVal.textContent = speed.toFixed(1);

            t += 0.002 * speed;

            // ===== CANVAS 1 =====
            ctx1.clearRect(0, 0, canvas1.width, canvas1.height);
            drawAxes(ctx1, canvas1,"œï‚ÇÅ & œï‚ÇÇ");

            drawCurve(ctx1, canvas1,
                x => A * Math.cos(k1 * x - w1 * t),
                "#39ff14"
            );

            drawCurve(ctx1, canvas1,
                x => A * Math.cos(k2 * x - w2 * t),
                "#ff00ff"
            );

            // ===== CANVAS 2 =====
            ctx2.clearRect(0, 0, canvas2.width, canvas2.height);
            drawAxes(ctx2, canvas2,"œï");

            drawCurve(ctx2, canvas2,
                x => A * Math.cos(k1 * x - w1 * t) +
                    A * Math.cos(k2 * x - w2 * t),
                "white"
            );

            const dk = k1 - k2;
            const dw = w1 - w2;

            drawCurve(ctx2, canvas2,
                x => 2 * A * Math.cos(0.5 * (dk * x - dw * t)),
                "#ff4444",
                true
            );

            drawCurve(ctx2, canvas2,
                x => -2 * A * Math.cos(0.5 * (dk * x - dw * t)),
                "#ff4444",
                true
            );

            requestAnimationFrame(animate);
        }

        animate();

    </script>
</body>

</html>

